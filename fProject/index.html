<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Login Area</title>
	<link href="../_vendor/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="../_vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="../_vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="../_vendor/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
	<link href="../_vendor/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
	<link href="asset/styleCss.css" rel="stylesheet">
</head>
<body style="background-color: rgb(160,160,160);">
	<div style="position: relative; width: 60%; margin: 60px auto; padding: 20px; background-color: white;">
		<center><h3>Login Area</h3></center>
		<hr>
		<form>
			<div class="col-md-6">
				<div class="form-group">
					<label for="exampleInputEmail">Email</label>
					<input required name="email" type="email" class="form-control" id="exampleInputEmail">
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					<label for="exampleInputPassword">Password</label>
					<input required name="password" type="password" class="form-control" id="exampleInputPassword">
				</div>
			</div>
			<div class="col-md-6">
				<button type="submit" class="btn btn-success">Sign In</button>
			</div>
			<div class="clearfix"></div>
		</form>
	</div>

	<div id="loading-page">
		<div class="dis-table">
			<div class="row">
				<div class="cel">
					<img src="../_vendor/loading_1.gif">
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="../_vendor/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="../_vendor/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../_vendor/datatables.net/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="../_vendor/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
	<script type="text/javascript" src="../_vendor/datatables.net-responsive/js/dataTables.responsive.min.js"></script>

	<script type="text/javascript">
		$( document ).ready(function() {
			$('#loading-page').hide();
			if (localStorage.getItem("codeOfMe") !== undefined && localStorage.getItem("codeOfMe") !== null && localStorage.getItem("codeOfMe") !== '') {
				var data = [];
				data['code'] = codeOfMe;
				postData(data,'http://localhost:7777/try-Js/bProject/public/api/sigin/checking');
			}

		});

		$(document).on('submit', 'form', function() {
			var data = $(this).serializeArray();
			postData(data,'http://localhost:7777/try-Js/bProject/public/api/sigin/excute');
			return false;
		});

		function postData(data,url) {
			$.ajax({
				url: url,
				type: 'post',
				dataType: 'json',
				data: data,
				beforeSend: function() {
					$('#loading-page').show();
				},
				success: function(data) {
					if (data.success == false) { alert(data.msg); }
					else { 
						localStorage.setItem("codeOfMe", data.code);
						// window.location.replace(data.url); 
					}
					$('#loading-page').hide();
				}
			});
		}
	</script>
</body>
</html>